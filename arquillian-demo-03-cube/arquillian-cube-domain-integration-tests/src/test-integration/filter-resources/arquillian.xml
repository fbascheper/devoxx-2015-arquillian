<?xml version="1.0" encoding="UTF-8"?>
<arquillian xmlns="http://jboss.org/schema/arquillian"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xsi:schemaLocation="http://jboss.org/schema/arquillian http://jboss.org/schema/arquillian/arquillian_1_0.xsd">


    <!--<container qualifier="tomcat" default="false">-->
        <!--<configuration>-->
            <!--<property name="host">localhost</property> -->
            <!--<property name="httpPort">8080</property>-->
            <!--<property name="user">admin</property> -->
            <!--<property name="pass">mypass</property>-->
        <!--</configuration>-->
    <!--</container>-->

    <container qualifier="JBoss-EAP6-remote" default="true">
        <protocol type="Servlet 3.0"/>
        <configuration>
            <!-- These properties are set by the maven docker plugin -->
            <property name="managementAddress">localhost</property>
            <property name="managementPort">9999</property>

            <!-- These properties are defined in the maven pom-file -->
            <property name="username">${docker.jboss-admin.username}</property>
            <property name="password">${docker.jboss-admin.password}</property>
        </configuration>
    </container>


    <extension qualifier="docker">
        <property name="serverVersion">1.21</property>
        <property name="serverUri">https://${docker.host.ip.address}:2376</property>
        <property name="dockerContainers">
            jboss:
              image: fbascheper/demo-jboss-eap:1.0-SNAPSHOT
              exposedPorts: [8080/tcp, 9999/tcp, 9990/tcp]
              await:
                strategy: sleeping
                sleeptime: 5000 ms
              env: [TOMCAT_PASS=mypass, JAVA_OPTS=-Dcom.sun.management.jmxremote.port=8089 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false]
              portBindings: [8089/tcp, 8080/tcp]
              beforeStop:
                - log:
                  to: /tmp/container.log
                  stdout: true

        </property>
    </extension>

    <extension qualifier="transaction">
        <property name="manager">java:jboss/UserTransaction</property>
    </extension>

    <extension qualifier="persistence">
        <property name="defaultDataSource">java:jboss/datasources/TenderNedDS</property>
        <!--<property name="defaultDataSeedStrategy">CLEAN_INSERT</property>-->
    </extension>

    <extension qualifier="persistence-dbunit">
        <property name="datatypeFactory">org.dbunit.ext.postgresql.PostgresqlDataTypeFactory</property>
    </extension>
</arquillian>
